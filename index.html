<!doctype html>

<!-- 
	Tittel: Connect Enkel Demo
	Beskrivelse: En særdeles enkel demo av UNINETTs tjenesteplattform Connect.
	Se: https://www.uninett.no/tjenester/tjenesteplattform
	
  @author Simon Skrødal
  @since August 2015
-->

<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <title>UNINETT Connect Demo</title>
    
    <!-- JSO av Andreas Åkre Solberg: http://oauth.no/jso/ :: Dette er modulen som tar seg av OAuth med Connect -->
    <script type="text/javascript" src="js/auth/jso.js"></script>
    <!-- Konfigurering og bittelitt kode for å sparke igang JSO autentiseringsflyt -->
    <script type="text/javascript" src="js/auth/connect_auth.js"></script>
     <!-- Bootstrap -->
     <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css" rel="stylesheet">
     <!-- Ikoner -->
     <link href="https://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css" rel="stylesheet">
     <!-- Styling av kode i UI -->
     <link href="css/prism.css" rel="stylesheet" type="text/css"/>
     <!-- Bootstrap template -->
     <link href="css/AdminLTE.min.css" rel="stylesheet" type="text/css"/>
     <link href="css/skins/skin-black.min.css" rel="stylesheet" type="text/css"/>
  </head>
  
  <body class="skin-black sidebar-collapse fixed">
    <div class="wrapper">
      
      <!------------------------------------------------ NAVBAR ------------------------------------------------>
      <header class="main-header">
        <a href="../index.php" class="logo">
            <img src="images/uninett_logo_dark_gray.svg" alt="UNINETT logo" type="image/svg+xml">
        </a>

        <nav class="navbar navbar-static-top" role="navigation">
          <span class="navbar-title">CONNECT Demo</span>
          <div class="navbar-custom-menu">
            <ul class="nav navbar-nav">
              <li class="dropdown user user-menu">
                <!-- Neddroppsmeny -->
                <a class="dropdown-toggle" data-toggle="dropdown" style="cursor: pointer;">
                  <img src="images/user_image.png" class="user-image fc-user-image"><!-- BILDE -->
                  <span class="fc-user-first-name">Pålogget<!-- USERINFO --></span>
                </a>
                <ul class="dropdown-menu">
                  <li class="user-header">
                    <img src="images/user_image.png" class="img-circle fc-user-image"><!-- BILDE -->
                    <p class="fc-user-full-name"><button class="btn btn-info btn-xs btnCallTokenInfo"><i class="ion ion-android-boat"></i> Ta jomfruturen!</button><!-- USERINFO --></p>
                    <span class="text-muted fc-group-count"><!-- GROUPS --></span>
                  </li>
                  <li class="user-footer">
                    <div class="pull-right">
                      <a class="fc-logout" class="btn btn-sm" style="cursor: pointer;"><i class="ion ion-log-out"></i> Logg ut</a>
                    </div>
                  </li>
                </ul>
              </li>
            </ul>
          </div>
        </nav>
      </header>
      <!----------------------------------------------- ./ NAVBAR ----------------------------------------------->
      
      
      
     
      <div class="content-wrapper">       
        <section id="mainContent" class="content hidden"> <!-- Obs! Skjult - 'hidden' fjernes i .js etter at en JSO token er mottatt
          <!----------------------------------------------- VELKOMMEN ----------------------------------------------->          

          <div class="jumbotron clearfix">
            <div class="container">
              <h1 class="text-nowrap"><i class="ion ion-star text-yellow"></i> Hei <span class="fc-user-first-name">du<!-- USERINFO --></span>!</h1>
              <p class="text-muted">- og velkommen til en liten UNINETT Connect demonstrasjon [<i class="ion ion-social-html5 text-red"></i> <i class="ion ion-social-javascript text-aqua"></i>]</p>
              <small class="text-muted">Om du vil kjøre meg på din egen server kan du <a href="" class="client-github-source" target="_blank">laste meg ned på GitHub</a></small>
            </div>
            
            <div class="pull-right">
              <h2 class="text-muted"><span class="fc-user-full-name"><!-- USERINFO--></span></h2>
              <div class="fc-group-list"><!-- GROUPS --></div>    
            </div>
          </div>


          <!-- Skjult velkomst-modal-->
          <div id="modal-welcome" class="modal">
            <div class="modal-dialog">
              <div class="modal-content">
                <div class="modal-header bg-light-blue">
                  <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                  <h4 class="modal-title"><i class="ion ion-star"></i> Heisann! <i class="ion ion-star"></i></h4>
                </div>
                <div class="modal-body">
                  <p>
                    Det du glaner på nå er en <code>klient</code>. 
                  </p>  
                  <p>
                    Ikke for å skryte, men jeg er laget kun med nettleserkode -- 
                    <code>HTML</code> og <code>JavaScript</code> -- og kan kjøre hvorsomhelst på hvasomhelst ;-)    
                  </p>
                  
                  <p>
                    Jeg er interaktiv og full av eksempler, informasjon og pekere som kan være nyttig for å lære om Connect for første 
                    gang eller bruke som referansepunkt lenger ned i løypa. 
                  </p>
                  
                  <p>
                    Om du vil kjøre meg på din egen server kan du <a href="" class="client-github-source" target="_blank">laste meg ned på GitHub</a> 
                    og registrere meg på nytt i <code>Connect</code> som din egen klient. Les videre så skal jeg vise deg hvordan du gjør det.
                  </p>
                  
                  <p>
                    <strong>
                      Denne demoen tar antar at du er autentisert med Feide. Om du velger noe annet (eks. Facebook eller Twitter) så er det også greit, 
                      men se da bort fra referanser til Feide-relaterte ting :)  
                    </strong>
                    
                  </p>
                </div>
                <div class="modal-footer">
                  <button type="button" class="btn btn-default" data-dismiss="modal">Lukk</button>
                </div>
              </div><!-- /.modal-content -->
            </div><!-- /.modal-dialog -->
          </div><!-- /.modal -->
          
          
          <!----------------------------------------------- ./VELKOMMEN ---------------------------------------------->




          <h2 class="page-header text-muted">Bakgrunn / jomfrutur</h2>


          <!------------------------------------------------ INTRO ------------------------------------------------> 

          <div class="row">
            <div class="col-lg-7">
              <div class="box box-info">
                <div class="box-header with-border">
                    <h3 class="box-title"><i class="ion ion-information-circled"></i> Følgende er viktig å få med seg altså:</h3>
                </div>  
                <div class="box-body">
                  <p>Da du kom for å besøke meg, ante jeg ikke hvem du var.</p>
                  <p>
                    <code>Connect</code> kjenner imidlertid <em>meg</em> og derfor sendte jeg deg aller først til henne med følgende informasjon (se kildekode i <code>connect_auth.js</code>):
                  </p> 
                  
                  <pre><code class="language-javascript fc-client-info"><!-- --></code></pre>
                  
                  <p>
                    <code>Connect</code> ba deg først om å identifisere deg med en ID som hun kjenner igjen (eks. Feide, IDporten, ...).
                  </p>
                  
                  <p>
                    Deretter ble du bedt om å godta at jeg også fikk vite litt mer om deg ("consent form") og om du fulgte godt med 
                    så var hun ganske så spesifikk. Jeg har nemlig snakket med <code>Connect</code> tidligere og fortalt henne akkurat 
                    hva slags informasjon jeg gjerne vil ha fra de som besøker meg (i <a href="https://dashboard.feideconnect.no" target="_blank">Connect Dashboard</a>), 
                    <button class="btn bg-orange btn-xs" onclick="UTILS.image('Scopes jeg har bedt om (i <code>Connect Dashboard</code>)', 'images/connect_core_scopes.png');"><i class="ion ion-image"></i> bare se her</button>. 
                  </p>
                  
                  <p>
                    Da du sa til <code>Connect</code> at det er greit å dele dette med meg, sendte hun deg tilbake hit (til min <code>redirect_uri</code>). 
                  </p>
                  
                  <p>
                    Enn så lenge vet jeg ingenting om deg, men <code>Connect</code> sendte med en <code>token</code> som er knyttet til 
                    deg som bruker og meg som klient. Denne kan benyttes for å spørre litt rundt etter informasjon. 
                    Jeg tenkte at dette er noe vi kan gjøre sammen slik at du kan lære litt mer om hva det er som foregår, okei? 
                  </p>
                  
                  <p class="text-center">
                    <button class="btn btn-info btnCallTokenInfo"><i class="ion ion-android-boat"></i> Start jomfruturen!</button>  
                  </p>  
                  
                </div>
                <div class="box-footer text-muted">
                    <p>
                      Tips! Jeg dumper også alle svar (rådata) i nettleseren sin <code>konsoll</code>, så det er bare å ta en titt.
                    </p>
                </div>
              </div>
            </div>
            
            <!------------------------------------------------ ./INTRO ------------------------------------------------>
            
            
            <!----------------------------------------- TOKEN/USERINFO/GROUPS ----------------------------------------->
            
            <div class="col-lg-5">
              <h2 class="page-header text-muted">Rådata fra Connect endepunkter</h2>
              
              <p class="text-muted">
                Boksene nedenfor vil vise samme informasjon som du fikk i hvert steg på 
                <button class="btn btn-info btn-xs btnCallTokenInfo"><i class="ion ion-android-boat"></i> jomfruturen</button>  <br>  
                Klikk <i class="ion ion-plus"></i> knappen for å vise/gjemme innholdet i hver boks.  
              </p>

              <div class="box box-info collapsed-box">
                <div class="box-header with-border">
                    <h3 class="box-title text-muted"><i class="ion ion-key"></i> Connect Token</h3>
                    <div class="box-tools pull-right">
                      <button class="btn btn-box-tool" data-widget="collapse"><i class="ion ion-plus"></i></button>
                    </div>
                </div>
                <div class="box-body">
                    <!-- TOKEN -->
                    <button class="btn btn-success btn-sm btnCallTokenInfo"><i class="ion ion-key"></i> Klikk for mer info om <code>token</code></button>
                    <pre>
                      <code class="language-javascript fc-token-dump"></code>
                    </pre>                
                </div>
                <div class="box-footer">
                  <p>Endepunkt: <code class="fc-auth-uri"><!-- CONFIG --></code></p>
                  <p>Docs: <a href="http://feideconnect.no/docs/authorization/" target="_blank">http://feideconnect.no/docs/authorization/</a></p>
                  
                </div>
              </div>
              
              <div class="box box-success collapsed-box">
                <div class="box-header with-border">
                    <h3 class="box-title text-muted"><i class="ion ion-android-person"></i> Connect /userinfo</h3>
                    <div class="box-tools pull-right">
                      <button class="btn btn-box-tool" data-widget="collapse"><i class="ion ion-plus"></i></button>
                    </div>
                </div>
                <div class="box-body">  
                    <!-- USERINFO -->
                    <button class="btn btn-success btn-sm btnCallUserInfo"><i class="ion ion-android-person"></i> Klikk for mer info om <code>/userinfo</code></button>
                    <pre>
                      <code class="language-javascript fc-userinfo-dump"></code>
                    </pre>                       
                </div>
                <div class="box-footer">
                  <p>Endepunkt: <code class="fc-userinfo-uri"><!-- CONFIG --></code></p>
                  <p>Docs: <a href="http://feideconnect.no/docs/oauth-authentication/" target="_blank">http://feideconnect.no/docs/oauth-authentication/</a></p>
                </div>
              </div>
              
              <div class="box box-warning collapsed-box">
                <div class="box-header with-border">
                    <h3 class="box-title text-muted"><i class="ion ion-android-people"></i> Connect /groups/me/groups</h3>
                    <div class="box-tools pull-right">
                      <button class="btn btn-box-tool" data-widget="collapse"><i class="ion ion-plus"></i></button>
                    </div>
                </div>
                <div class="box-body">
                    <!-- GROUPS -->
                    <button class="btn btn-success btn-sm btnCallUserGroups"><i class="ion ion-android-people"></i> Klikk for mer info om <code>/groups/me/groups</code></button>
                    <pre>
                      <code class="language-javascript fc-groups-dump"></code>
                    </pre>                            
                </div>
                <div class="box-footer">
                  <p>Endepunkt: <code class="fc-groups-uri"><!-- CONFIG --></code></p>
                  <p>Docs: <a href="http://feideconnect.no/docs/groups/" target="_blank">http://feideconnect.no/docs/groups/</a></p>
                </div>
              </div>
            </div>
            <!----------------------------------------- ./TOKEN/USERINFO/GROUPS ----------------------------------------->
          </div> <!-- ./row -->
          
          
          <h2 class="page-header text-muted">En mer detaljert gjennomgang</h2>
          
          <!--------------------------------------------------------------- GRUPPER -------------------------------------------------------------->  
          <div class="row">
            <div class="col-lg-12">
              <div class="box box-warning">
                <div class="box-header with-border">
                    <h3 class="box-title"><i class="ion ion-android-people"></i> Grupper</h3>
                </div>  
                <div class="box-body">
                  <p>
                    I jomfruturen sendte vi et kall til endepunktet <code>/groups/me/groups</code> for å finne ut hvilke grupper du tilhører. 
                    Om du hoppet over det steget, eller bare er veldig glemsk, så kan du kjøre det kallet igjen nå:
                  </p>
                  
                  <p>
                    <button class="btn bg-maroon btn-sm btnCallUserGroups"><i class="ion ion-android-people"></i> <code>/groups/me/groups</code></button> 
                  </p>
                  
                  <p>
                    Grupper gir klienter en unik mulighet til å sette kontekst for en autentisert bruker; for deling, tilgangskontroll, kommunikasjon, m.m.
                    Og siden gruppene er tilgjengelige på tvers av tjenester (som bruker <code>Connect</code>) slipper <em>du</em> å kaste bort tid med 
                    gruppehåndtering i dine klienter - herlig :) 
                  </p>
                  
                  <p>
                    Du kan lese i mer detalj om hvilke gruppe-typer Connect opererer med på <a href="http://feideconnect.no/docs/grouptypes/" target="_blank">feideconnect.no</a>, 
                    men kort fortalt eksisterer i skrivende stund disse typene:
                  </p>
                  
                  <ul>
                    <li>UNINETT Connect Organisasjon</li>
                    <li>Organisasjonadministratorgruppe</li>
                    <li>Kull</li>
                    <li>Klasse</li>
                    <li>Studieprogram</li>
                    <li>Studieretning (kommer)</li>
                    <li>Emne</li>
                    <li>Ad-hoc</li>
                  </ul>
                  
                  <p>
                    Det jeg tenkte vi kunne gjøre <em>her og nå</em> er å se litt mer på Connect sine <code>ad-hoc</code> grupper. Som navnet hinter til, så er dette grupper som 
                    kan opprettes ved behov. Connect tilbyr faktisk en egen tjeneste som lar deg gjøre akkurat dette: <a href="https://groups.feideconnect.no" target="_blank">groups.feideconnect.no</a>, 
                    a.k.a. <code>Mine Grupper</code>. 
                  </p>
                  
                  <p>
                    I Mine Grupper kan du se hvilke grupper du er medlem i (<code>/groups/me/groups</code>, ikke sant?) samt administrere/opprette nye (<code>ad-hoc</code>) grupper og 
                    medlemmer i disse.
                  </p>
                  
                  <p>
                    La oss se om vi ikke kan legge deg til ei ny gruppe som jeg har opprettet i Mine Grupper for anledningen. Gruppa heter <code><strong>Connect VIP</strong></code> 
                    - <em>En ad-hoc gruppe for alle Connect-entusiaster</em>. Gruppe-ID, som jeg fant i Mine Grupper, er <code>eb965211-ebdf-41cd-a621-fe355f7e852b</code>.       
                  </p>
                  
                  <p>
                    API-endepunkt for å spørre om gruppemedlemmer er <code>/groups/fc:adhoc:{groupid}/members</code>, så la oss bypasse Mine Grupper sitt GUI og heller bruke gruppe-APIet 
                    for å finne medlemmene:
                  </p>
                  
                  <p>
                    <!-- Se: rute til groups endepunkt ligger i data-attributten -->
                    <button class="btn bg-maroon btn-sm btnCallGroupQuery" data-group-query="groups/fc:adhoc:eb965211-ebdf-41cd-a621-fe355f7e852b/members"><i class="ion ion-android-people"></i> <code>/groups/fc:adhoc:eb965211-ebdf-41cd-a621-fe355f7e852b/members</code></button>
                  </p>
                  
                  <p>
                    Mye kule folk in den gruppa altså! Lyst til å bli en av de? I Mine Grupper fikk jeg også ei invitasjonslenke som du kan stikke innom nå, så ser vi hva som skjer. 
                    <a href="https://groups.feideconnect.no/#!/invitation/eb965211-ebdf-41cd-a621-fe355f7e852b/9202328d-c6fb-44d9-8872-574782f68879" target="_blank">
                      Gå til invitasjonen for gruppe <code>Connect VIP</code>.
                    </a>
                  </p>
                                    
                  <p>
                    Om du godtok invitasjonen, kan vi jo sjekke igjen med <code>/groups/me/groups</code> og se om Connect har fått med seg at du nå er
                    stolt medlem av den nye gruppa:
                  </p>
                  
                  <p>
                    <button class="btn bg-maroon btn-sm btnCallUserGroups"><i class="ion ion-android-people"></i> <code>/groups/me/groups</code></button> 
                  </p>
                 
                </div><!--./body-->
                <!-- Footer -->
                <div class="box-footer text-muted">
                  <p>
                    Mer om grupper på <a href="http://feideconnect.no/docs/groups/" target="_blank">feideconnect.no</a>
                  </p>
                </div>
                
              </div><!--./box-->
            </div> <!--./col-->
          </div> <!--./row-->
          <!--------------------------------------------------------------- ./GRUPPER -------------------------------------------------------------->
          
          
          <!------------------------------------------------ Klienter og API Gatekeepere ------------------------------------------------>          
          <div class="row">
            <div class="col-lg-12">
              <div class="box box-info">
                <div class="box-header with-border">
                    <h3 class="box-title"><i class="ion ion-code-working"></i> Klienter og API Gatekeepere</h3>
                </div>  
                <div class="box-body">
                  
                  <!-- Info: 
                    Bootstrap tilbyr 'modals' (små popup-vinduer) som brukes flere steder på denne siden.
                    Lenkene under fyrer av hver sin modal med innhold vha. attributtene data-toggle og data-target. 
                  -->
                    
                  <p><strong>Klienter</strong></p>  
                  <p>
                    I jomfruturen din erfarte du hvordan vi snakket med <code>Connect</code> for identifisering og uthenting av informasjon. 
                    La oss nå se kjapt på hvordan dette går for seg i bakgrunnen:
                  </p>
                  <!-- Vis DIV med ID #modal-connect-dashboard -->
                  
                  <p><button class="btn btn-success btn-sm" data-toggle="modal" data-target="#modal-connect-dashboard"><i class="ion ion-heart"></i> Hvordan <strong>Connect</strong> vet hvem jeg (klient) er</button></p>
                  <!-- osv... -->
                  <p><button class="btn btn-success btn-sm" data-toggle="modal" data-target="#modal-client-structure"><i class="ion ion-social-github"></i> Hvordan jeg er skrudd sammen</button></p>
                  
                  <p><strong>API Gatekeepere (API GK)</strong></p>
                  
                  <p>
                    Frem til nå har vi snakket mest om autentiserings-aspektet ved <code>Connect</code> og noen kjerne-endepunkter som hun tilbyr, men dette er ikke alt.
                  </p>
                  
                  <p>
                    En super-viktig og super-nyttig funksjonalitet du får med <code>Connect</code> er muligheten til å bruke/dele informasjon via hennes <code>API Gatekeeper</code>. 
                    Her er det så mye kult jeg gjerne vil snakke om for å virkelig få deg til å se mulighetene, men min funksjon er å tilby en "liten UNINETT Connect demonstrasjon" 
                    så jeg skal forsøke å fatte meg i korthet.
                  </p>
                  
                  <p>
                    La meg først likevel si at API GK-aspektet tilfører, som jeg ser det, <del>to</del> <del>tre</del> <del>fire</del> fem hovedgevinster:
                    
                    <ol>
                      <li>Den gjør det lett for deg å <em>dele</em> datakilder (med andre eller bare dine egne klienter) på en sikker måte (heter ikke <em>gatekeeper</em> for ingenting)</li>
                      <li>Den gir deg mulighet til å "tappe" inn i og sy sammen data fra Connect samt mange ulike APIer (dine egne og andres) - en "fleretasjers databuss" om du vil</li>
                      <li>API GK muliggjør tilgangsstyring på flere nivåer: hvilke klienter, hvilke scopes, brukere...</li>
                      <li>Mindre admin: Connect Dashboard er selvbetjent, og tjenestetilbydere kan abonnere på dine APIer uten at du trenger å gjøre noe. Dashboard gir deg også innsikt i hvem som bruker dine data.</li>
                      <li>Selv om ditt endepunkt flyttes forblir API GK URL konstant (trenger bare oppdatere i Dashboard)</li>
                    </ol>
                  </p>
                  
   
                  <p><button class="btn btn-success btn-sm" data-toggle="modal" data-target="#modal-other-apis"><i class="ion ion-shuffle"></i> Hvordan snakke med andre APIer</button></p>
                  
                  <p><button class="btn btn-success btn-sm" data-toggle="modal" data-target="#modal-joke-api"><i class="ion ion-share"></i> Hvordan lage og dele sitt eget API</button></p>
                  
                  <p>Sjekk ut dokumentasjon og enkel kode for vitse-API på <a href="" class="api-github-source" target="_blank">GitHub</a> (motivator: du finner ALLE de gode vitsene i kildefila!!).</p>
                  
                    
                  <p><strong>Din egen Connect Dashboard</strong></p>
                  <p>
                    Litt sånn apropos til slutt. Du har nå lært litt om <code>Connect</code>, registrering og autentisering av klienter, dataflyt og litt om APIer. 
                    Jeg håper du har vært innom hennes <code>Dashboard</code> og tatt en titt der også. Selv om det kanskje ser veldig tomt ut der inne for deg 
                    akkurat nå, ikke glem at Connect også er et veldig nytting tjeneste/API-register for deg og dine prosjekter - stort og smått.  
                  </p>
                  
                  <p>
                    Det jeg egentlig mener er alle de 5 punktene jeg listet like ovenfor. Når du først har kommet i gang med din første Connect klient eller API er 
                    det veldig fort gjort å bruke det du har lært for å lage enda en og enda en... I løpet av kort tid vil ditt <code>Dashboard</code> begynne å ligne
                    <button class="btn bg-orange btn-xs" onclick="UTILS.image('Connect Dashboard', 'images/connect_dashboard_simons.png');"><i class="ion ion-image"></i> på dette</button>, 
                    og da vil du fort sette pris på alle fordelene <code>Connect Dashboard</code> gir deg.
                  </p>
                  
                  <p>
                    <code>Connect</code> er din tallerken, klienten ditt bestikk og alle APIene du plukker ut fra <code>Dashboard</code> sin matbod er ingrediensene for et supert måltid. 
                  </p>
                  
                  <p>
                    <strong>Vel bekomme <i class="ion ion-wineglass text-red"></i></strong>
                  </p>
                  
                 
                </div><!--./body-->
                <!-- Footer
                <div class="box-footer text-muted"></div>
                -->
              </div><!--./box-->
            </div> <!--./col-->
          </div> <!--./row-->
          <!-------------------------------- ./Klienter og API Gatekeepere (Moduler brukt i denne seksjonen lenger ned) ------------------------------->
          
          
          <div class="row">
            <div class="col-lg-12">
              
                  <div class="alert bg-light-blue">
                    <h4>Kildekode (Github)</h4>
                    <p><a href="" class="client-github-source" target="_blank"><i class="ion ion-social-github"></i> <strong>Klient</strong></a></p>
                    <p><a href="" class="api-github-source" target="_blank"><i class="ion ion-social-github"></i> <strong>Vitse-API</strong></a></p>
                    <p><a href="https://github.com/andreassolberg/jso/" "_blank"><i class="ion ion-social-github"></i> Andreas Solberg's <strong>JSO</strong></a></p>
                    <p>&nbsp;</p>
                    <h4>Dokumentasjon og Tjenester</h4>
                    <p>
                      På <a href="http://feideconnect.no/docs/gettingstarted/" target="_blank">feideconnect.no</a> finner du oppdatert dokumentasjon rundt alle 
                      aspekter av Connect.
                    </p>            
                    
                    <p>
                      I <a href="https://dashboard.feideconnect.no/" target="_blank"><i class="ion ion-ios-pulse-strong"></i> Connect Dashboard</a> 
                      oppretter og administrerer du klienter og APIer
                    </p>
                    
                    <p>
                      <a href="https://min.feideconnect.no/" target="_blank">Min Connect</a> er en sluttbrukertjeneste der du kan se informasjon om deg selv  
                      og se/styre hvilke klienter som har godkjenning til å bruke dine data.
                    </p>
                    
                    <p>
                      <a href="https://groups.feideconnect.no/" target="_blank">Mine Grupper</a> er en sluttbrukertjeneste som gir deg oversikt over dine 
                      gruppetilhørigheter samt administrasjon av disse. Du kan også opprette nye grupper her inne.  
                    </p>
                  </div>
              
            </div>
          </div>
          
          
          
          
          
          
  
          <!------------------------------------------------ MODUL: HVORDAN CONNECT VET HVEM JEG ER ------------------------------------------------>
          <div id="modal-connect-dashboard" class="modal">
            <div class="modal-dialog">
              <div class="modal-content">
                <div class="modal-header bg-light-blue">
                  <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                  <h4 class="modal-title"><i class="ion ion-heart"></i> Hvordan <code>Connect</code> vet hvem jeg (klient) er</h4>
                </div>
                <div class="modal-body">
                  <p>
                    Tidligere fikk du vite at jeg fortalte <code>Connect</code> følgende om meg da jeg sendte deg til henne for autentisering:
                  </p>
                  
                  <pre><code class="language-javascript fc-client-info"><!-- --></code></pre>
                  
                  <p>
                    Min egen URL er jo lett for meg å vite, men hvor fikk jeg tak i min <code>client_id</code>? Jo det skal jeg fortelle deg nå.
                  </p>
                  
                  <p>
                    <code>Connect</code> har sin egen <strong>selvbetjente</strong> <code>Dashboard</code>, der du som utvikler/tjenesteleverandør 
                    kan registrere klienter som meg, samt datakilder (eller APIer) som vi skal se på litt senere.
                  </p>
                  
                  <p>
                    Å registrere en klient er fort gjort og har umiddelbar virkning, så du slipper å vente på at noen andre må gjøre noe. 
                    Selv ble jeg registrert og konfigurert på under 2 minutter, det er jeg sikker på!! Her ser du hvordan jeg ble født:
                  </p>
                  
                  <p class="text-center">
                    <img src="images/connect_client_registration.png" class="img-responsive img-thumbnail">
                  </p>
                  
                  <p>
                    Deretter, med noen enkle klikk, ble jeg konfigurert i <code>Dashboard</code>'en til å få tilgang til de <code>scopes</code> som jeg 
                    fortalte deg om tidligere (<code>userinfo-feide</code>, <code>groups</code>, m.fl.). 
                  </p>
                  
                  <p>
                    Det var altså ved registrering i <code>Dashboard</code> at ble jeg tildelt en unik <code>client_id</code>, som du finner igjen på 
                    <code>OAuth Details</code>-siden:
                  </p>
                  
                  <p class="text-center">
                    <img src="images/connect_client_oauth_details.png" class="img-responsive img-thumbnail">  
                  </p>
                  
                  <p class="alert bg-light-blue">
                      <strong>Husk!</strong> Dersom du flytter klienten til en ny URL så MÅ du huske å oppdatere <code>redirect_uri</code> både i 
                      Connect <code>Dashboard</code> og i koden din!  
                  </p>
                  
                  <p>
                    Okei! Nå vet vi hvor/hvordan jeg er registrert med <code>Connect</code>. Stikk for all del innom 
                    <a href="https://dashboard.feideconnect.no/" target="_blank">https://dashboard.feideconnect.no/</a> og 
                    ta en titt selv.
                  </p>
                  
                  <p>
                    I neste avsnitt ser vi på hvordan jeg er skrudd sammen slik at jeg faktisk kan sende deg til <code>Connect</code> 
                    for autentisering og snakke videre med henne i etterkant.
                  </p>
                </div>
                <div class="modal-footer">
                  <button type="button" class="btn btn-default" data-dismiss="modal">Lukk</button>
                </div>
              </div><!-- /.modal-content -->
            </div><!-- /.modal-dialog -->
          </div><!-- /.modal -->
          <!------------------------------------------------ ./HVORDAN CONNECT VET HVEM JEG ER ------------------------------------------------>


          <!------------------------------------------------ MODUL: HVORDAN JEG ER SKRUDD SAMMEN MODAL ------------------------------------------------>   
          <div id="modal-client-structure" class="modal">
            <div class="modal-dialog">
              <div class="modal-content">
                <div class="modal-header bg-light-blue">
                  <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                  <h4 class="modal-title"><i class="ion ion-social-github"></i> Hvordan jeg er skrudd sammen</h4>
                </div>
                <div class="modal-body">
                  <p>
                    Jeg nevnte innledningsvis at jeg er skrevet i kun <code>HTML</code> og <code>JavaScript</code>. 
                    Mens tradisjonell Feide-pålogging krever et relativt komplekst oppsett på serverside med en SAML 2.0 programvarepakke 
                    (f.eks. SimpleSAMLphp), kan du altså med <code>Connect</code> autentisere brukere med bare <code>JavaScript</code> 
                    om du vil. Åja, og så slipper du selvfølgelig styret med idp-test, XML metadata, varsling til Feide om hvilke vertsorganisasjoner som 
                    skal kunne bruke tjenesten og at vertsorganisasjonene må aktivt åpne opp for at deres brukere kan ta i bruk tjenesten, osv... 
                  </p>
                  
                  <p>
                    Selv bruker jeg Andreas Solberg sin JSO-modul for OAuth 2.0 
                    (<a href="https://github.com/andreassolberg/jso" target="_blank">GitHub</a>) for å ta seg av autentisering. 
                    Kode for å få til dette er <strong>sørgelig enkelt</strong>, se her da:  
                  </p>

<pre><code class="language-javascript">
// Inkluder JSO-modul
&lt;script type="text/javascript" src="js/auth/jso.js"></script>
// Konfigurer JSO 
var min_jso_instans = new JSO({
client_id : 'id fra Connect Dashboard',
redirect_uri : 'URL til der jeg bor (gjerne 127.0.0.1 mens du utvikler)',
authorization	: 'https://auth.feideconnect.no/oauth/authorization'
});
// callback() sender deg til Connect og fanger hennes respons ved retur. callback() bør kalles så tidlig som mulig, før applikasjonen lastes. 
min_jso_instans.callback();
</code></pre>  

                  <p>
                    Når bruker så er autentisert kan du bruke JSO som følger:
                  </p>

<pre><code class="language-javascript">
// Slå på JQuery for JSO (forenkler AJAX kall)
JSO.enablejQuery($);
// Gjør et kall med din JSO instans - 'min_jso_instans'
min_jso_instans.ajax({
url: 'https://auth.feideconnect.no/userinfo',
dataType: 'json'
}).done(function(userObj){
// Voila!
});
// Utlogging gjør jeg på denne måten:
min_jso_instans.wipeTokens();				
window.location.replace("https://auth.feideconnect.no/logout"); 
</code></pre> 

                  <p>
                    ...du kan lese mer om - og laste ned - JSO på <a href="https://github.com/andreassolberg/jso" target="_blank">GitHub</a>. 
                    Du kan også studere kildekoden min for å se hvordan <em>jeg</em> gjør det.
                  </p>               
                  
                  <p>
                    En liten ting til: klienter <em>må</em> ikke bruke JSO (eller JavaScript) for å autentisere seg med Connect altså. Standarden 
                    heter OAuth 2.0, og du kan bruke nesten hva som helst for å snakke med den. 
                    Her er <a href="http://feideconnect.no/docs/oauth-libraries/" target="_blank">en haug med biblioteker</a> i mange 
                    ulike språk (Python, PhP, Ruby, .net, Java +++++) som du kan se på, eller du kan skrive din egen. Det er også lett å modifisere 
                    moduler som er ferdigskrevet for autentisering med Google/Facebook/Twitter/etc til å virke med Connect.
                  </p>
                  
                  <p>
                    Felles for alle biblioteker/moduler er at de følger en standard som egentlig er veldig enkel (når du først har skjønt flyten) og frittstående i 
                    natur.
                  </p>
                  
                </div>
                <div class="modal-footer">
                  <button type="button" class="btn btn-default" data-dismiss="modal">Lukk</button>
                </div>
              </div><!-- /.modal-content -->
            </div><!-- /.modal-dialog -->
          </div><!-- /.modal -->
        <!------------------------------------------------ ./HVORDAN JEG ER SKRUDD SAMMEN MODAL ------------------------------------------------>




          <!------------------------------------------------ MODUL: SNAKKE MED ANDRE APIer ------------------------------------------------>
          <div id="modal-other-apis" class="modal">
            <div class="modal-dialog">
              <div class="modal-content">
                <div class="modal-header bg-light-blue">
                  <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                  <h4 class="modal-title"><i class="ion ion-shuffle"></i> Snakke med andre APIer</h4>
                </div>
                <div class="modal-body">
                  <p>
                    Forfatteren min har juksa litt og laget et superenkelt API som jeg allerede har tilgang til. At han er bedre til å lage vitser enn 
                    kode er det ingen tvil om, bare vent å se :)  
                  </p>
                  
                  <p>
                    I Connect Dashboard ligger et API med ID <code>simons-vitser</code> ("Det beste fra Simon's vitsekolleksjon!") tilgjengelig. 
                    Jeg er konfigurert til å ha lov til å snakke med dette APIet. Se her: 
                  </p>
                  <p class="text-center">
                    <img src="images/connect_api_scopes_select.png" class="img-responsive img-thumbnail">
                  </p>

                  <p>
                    Legg merke til at eier av APIet har sagt at alle scopes, bortsett fra 18-årsgrense, kan benyttes uten manuell godkjenning. Dersom vi 
                    velger å ta med 18-årsgrense, blir Simon Skrødal (eier av API) varslet om at en klient har etterspurt denne tilgangen og Simon må ta 
                    stilling til om dette er ok.
                  </p>
                  <p>
                    Du skjønner sikkert hvorfor 18-årsgrense-scopet er moderert når du leser følgende:
                  </p>
                  
                  <blockquote>
                    En vits med 18-årsgrense kan ha særlig angstskapende stemning, og inneholde store mengder brutale og detaljerte voldshandlinger, særlig i kombinasjon med et angstskapende uttrykk. Skildringer av grov seksualisert vold gir normalt også 18-årsgrense. Vitser som Vitsetilsynet ikke har vurdert må fortelles med en 18-årsgrense.
                  </blockquote>
                  
                  <p>
                    Hehe. Vel, la oss se om vi kan få ut en vits eller to fra APIet da. AJAX-kallet som kjøres når du klikker knappen nedenfor finner du i fila <code>jokes.js</code>.
                  </p>
                  
                  <p>
                    <blockquote id="jokeContainer"><!-- AJAX --></blockquote>  
                  </p>
                                            
                  <button class="btn btn-success btnGetJoke">Gi meg en vits</button>
                  <p></p>             
                  <p>
                    Knappen over serverer altså morsomme vitser på random som perler på en snor. APIet vet at jeg kan få vitser fra alle scopes bortsett fra den 
                    beryktede 18-årsgrensen. Hvilket scope vitsen er hentet fra ser du helt i starten på vitsen (eks. [15]).
                  </p>
                  
                  <p>
                    I neste avsnitt ser vi litt nøyere på hva APIet egentlig holder på med.
                  </p>
                  
                </div>
                <div class="modal-footer">
                  <button type="button" class="btn btn-default" data-dismiss="modal">Lukk</button>
                </div>
              </div><!-- /.modal-content -->
            </div><!-- /.modal-dialog -->
          </div><!-- /.modal -->
          <!------------------------------------------------ ./SNAKKE MED ANDRE APIer ------------------------------------------------>





          <!------------------------------------------------ MODUL: HVORDAN LAGE OG DELE SITT EGET API --------------------------------------------->
          <div id="modal-joke-api" class="modal">
            <div class="modal-dialog">
              <div class="modal-content">
                <div class="modal-header bg-light-blue">
                  <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                  <h4 class="modal-title"><i class="ion ion-share"></i> Hvordan lage og dele sitt eget API</h4>
                </div>
                <div class="modal-body">
                  
                  <p>La oss studere det supermorsomme vitse-api'et i litt mer detalj. For mer utfyllende informasjon kan du forresten laste ned/se på kildekode på 
                    <a href="" class="api-github-source" target="_blank">GitHub</a>.
                  </p>
                  
                  <p>
                    APIet er et enkelt PHP-script som ligger på en webtjener og alt det gjør er å ta imot en henvendelse og sende et tilfeldig svar (en vits) tilbake. 
                    Scriptet forventer at henvendelser kommer fra en Connect-klient via Connect GK på følgende URL: <br>
                    <code>https://simons-vitser.gk.feideconnect.no/api/connect/simons-vitser/</code>  
                  </p>
                  
                  <p>
                    APIet ligger egentlig på et helt annet domene, men med Connect rutes altså alle kall via gatekeeper på URLen over. 
                    Å registrere et API i Connect Dashboard er like enkelt som å registrere en klient; tilfør en <code>identifikator</code>, et navn og en URL og vips! 
                  </p>
                  
                  <p class="alert alert-warning">
                    <strong>SSL: Connect GK vil bare snakke med ditt API dersom tjeneren din benytter https med et godkjent sertifikat ('self-signed' er ikke ok).</strong>
                    
                  </p>
                  
                  <p>
                    La oss si at vitse-APIet egentlig lå her:  <code>https://api.eksempel.no/api/connect/simons-vitser/index.php</code>. 
                  </p>
                  <p>  
                    I Connect Dashboard oppgir vi da: 
                    
                    <ul>
                      <li><code>endpoint</code> : <mark>https://api.eksempel.no</mark></li>
                      <li><code>identifikator</code> : <mark>simons-vitser</mark></li>
                    </ul> 
                  </p>
                  <p>
                    URLen som Connect-klienter må bruke for å snakke med APIet ditt blir da: <br> 
                    <code>https://simons-vitser.gk.feideconnect.no/api/connect/simons-vitser/</code>  
                  </p>
                  
                  <strong>Headere fra Connect GK</strong>
                  
                  <p>
                    For å sikre oss om at klienten som kaller APIet faktisk er en autentisert Connect-klient, sender Connect GK med flere nyttige headere. 
                    I PHP kan vi titte på f.eks. $_SERVER arrayen for å finne ut mer. Dersom klientkallet kom via Connect GK kan du forvente at disse feltene 
                    medfølger:
                  </p>
                  
<pre><code class="language-javascript">
// Min ID som Connect ga meg ved registrering
"HTTP_X_FEIDECONNECT_CLIENTID": "f299e692-473a-4ac1-91c3-7e7872d1548d",
// Scopes jeg har tilgang til
"HTTP_X_FEIDECONNECT_SCOPES": "9,15",
// Bruker-ID til han som besøkte meg
"HTTP_X_FEIDECONNECT_USERID": "835c8888-08a9-4332-9a18-074944355ad8",
// Feide ID for samme bruker
"HTTP_X_FEIDECONNECT_USERID_SEC": "feide:simon@uninett.no", 

// API GK bruker/pass ("Trust"-meny i Dashboard for ditt API.)
"PHP_AUTH_USER": "feideconnect",
"PHP_AUTH_PW": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx",
</code></pre>
                  
                  <p>
                    Med informasjonen over kan vi altså:
                    <ul>
                      <li>Autentisere klienten (sjekk at GK sender med riktig bruker/passord)</li>
                      <li>Si noe om klienten som er på besøk (kjenne igjen (ID) og vite tilganger (scopes))</li>
                      <li>Si noe om bruker som besøker klienten (ID, Feide)</li>
                    </ul>   
                  </p>
                  
                  <p>
                    Hvilke muligheter! Tenk deg at din klient, som heter noe sånt som <mark>'Skal det Vær en Vits?'</mark>, gjennom Connect fikk tilgang til et FS-API (for studentdata), et værmeldings-API og vårt vitse-API. 
                    Da kunne du f.eks. filtrert ut alle som studerer programmering og gitt disse brukerne bare finvær og de beste vitsene (om binære tall og sånn). 
                  </p>
                  
                  <p>
                    Sjekk ut dokumentasjon og enkel kode for vitse-API på <a href="" class="api-github-source" target="_blank">GitHub</a>.
                  </p>
                </div>
                <div class="modal-footer">
                  <button type="button" class="btn btn-default" data-dismiss="modal">Lukk</button>
                </div>
              </div><!-- /.modal-content -->
            </div><!-- /.modal-dialog -->
          </div><!-- /.modal -->
          <!------------------------------------------------ ./HVORDAN LAGE OG DELE SITT EGET API ------------------------------------------->





          <!------------------------------------------------ MODUL: Ubrukt (template) ------------------------------------------------>
          <div id="???" class="modal">
            <div class="modal-dialog">
              <div class="modal-content">
                <div class="modal-header bg-light-blue">
                  <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                  <h4 class="modal-title"></h4>
                </div>
                <div class="modal-body">
                  <!-- -->
                </div>
                <div class="modal-footer">
                  <button type="button" class="btn btn-default" data-dismiss="modal">Lukk</button>
                </div>
              </div><!-- /.modal-content -->
            </div><!-- /.modal-dialog -->
          </div><!-- /.modal -->
          <!------------------------------------------------ ./... ------------------------------------------------>
          
  
        
          
        </section>
      </div>
     
      
      <!------------------------------------------------ FOOTER ------------------------------------------------>
      <footer class="main-footer" style="background-color: #333;">
        <div class="pull-right hidden-xs">
          <a href="https://www.uninett.no" target="_blank">
            <img src="images/uninett_logo_dark_gray.svg" alt="UNINETT AS" type="image/svg+xml" height="25">
          </a>
        </div>
        &nbsp;
      </footer>
      <!----------------------------------------------- ./FOOTER ------------------------------------------------>

    </div><!-- ./wrapper -->

  
    <!-- UTILS MODUL: For info/feilmeldinger -->
    <div id="alertModal" class="modal">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header bg-light-blue">
            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
            <h4 class="modal-title"></h4>
          </div>
          <div class="modal-body">
            
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-default" data-dismiss="modal">Lukk</button>
          </div>
        </div><!-- /.modal-content -->
      </div><!-- /.modal-dialog -->
    </div><!-- /.modal -->
    
    <!-- UTILS MODUL: For bilder -->
    <div id="imageModal" class="modal">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header bg-light-blue">
            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
            <h4 class="modal-title"></h4>
          </div>
          <div class="modal-body text-center">
            <img src="" class="img-responsive img-thumbnail modal-img">  
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-default" data-dismiss="modal">Lukk</button>
          </div>
        </div><!-- /.modal-content -->
      </div><!-- /.modal-dialog -->
    </div><!-- /.modal -->
    
  
    <!-- JQuery, såklart... -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
    <!-- Bootstap -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
    <!-- UI -->
    <script type="text/javascript" src="js/ui/AdminLTE.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jQuery-slimScroll/1.3.6/jquery.slimscroll.min.js" type="text/javascript"></script>
    <!-- Styling av kode i UI -->
    <script type="text/javascript" src="js/ui/prism.js"></script>
    <!-- JS for å snakke med Connect og APIer -->
    <script type="text/javascript" src="js/connect.js"></script>
    <script type="text/javascript" src="js/jokes.js"></script>
    <!-- JS for klienten -->
    <script type="text/javascript" src="js/app.js"></script>
   
  </body>
</html>
